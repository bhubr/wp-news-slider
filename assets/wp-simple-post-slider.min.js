Array.prototype.reduce||Object.defineProperty(Array.prototype,"reduce",{value:function(a){if(null===this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof a)throw new TypeError(a+" is not a function");var b,c=Object(this),d=c.length>>>0,e=0;if(2==arguments.length)b=arguments[1];else{for(;e<d&&!(e in c);)e++;if(e>=d)throw new TypeError("Reduce of empty array with no initial value");b=c[e++]}for(;e<d;)e in c&&(b=a(b,c[e],e,c)),e++;return b}}),function(a){a(window).on("load",function(){function b(b,c){function d(b){a(r[C]);a(w[C]).removeClass("active"),void 0!==b?C=b:C++,C>=r.length&&(C=0),C<0&&(C=r.length-1),a(w[C]).addClass("active"),p?q.css({top:-C*D+"px"}):q.css({left:1-C*i+"px"})}function e(){console.log("outer mask dims",s.width()+"x"+s.height()),console.log("inner mask dims",n.width()+"x"+n.height());var a=k.width()-u,b=a/o.aspectRatio;r.width(a),r.height(b),s.css("height",b),console.log("thumbs dims",r.width()+"x"+r.height()),console.log("viewport dims",a+"x"+b),console.log("mask dims",s.width(),s.height())}function f(){i=v.width(),q.css("width",i*r.length),r.width(i),d(C)}function g(){return null!==B}function h(a){clearInterval(B),B=a&&g()?setInterval(d,o.interval):null}var i,j=a(c),k=j.parent(),l=(j.attr("id"),j.data("options")),m={interval:1e3*l.interval,direction:l.direction,autoplay:l.autoplay,aspectRatio:parseFloat(l.aspect_ratio)},n=j.find(".inner-mask"),o=a.extend({interval:5e3,direction:"vertical",autoplay:!1,aspectRatio:1.25},m),p="vertical"===o.direction,q=j.find(".thumbs-wrapper"),r=j.find(".excerpt"),s=j.find(".mask"),t=/(\d+)px.*/,u=["padding","border"].reduce(function(a,b){var c=t.exec(s.css(b));if(null!==c)return a+2*parseInt(c[1],10)},0),v=a(r[0]),w=j.find(".numbered-btn"),x=j.find(".icon-play2"),y=j.find(".icon-stop"),z=j.find(".icon-backward"),A=j.find(".icon-forward2"),B=null,C=0,D=250;console.log(o),o.autoplay&&(B=setInterval(d,o.interval)),e(),a(window).on("resize",e),p||(f(),a(window).on("resize",f)),w.click(function(b){d(a(this).data("idx")-1),h(!0)}),z.click(function(a){d(C-1),h(!0)}),A.click(function(){d(C+1),h(!0)}),y.click(function(){h(!1)}),x.click(function(){d(),B=setInterval(d,o.interval)})}var c=a(".wp-sps-wrapper");c.each(b)})}(void 0!==Zepto?Zepto:jQuery);